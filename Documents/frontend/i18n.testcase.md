# 前端国际化功能测试用例

## 测试目的
验证主页语言切换后，商家后台和用户聊天界面的国际化功能是否正常工作。

## 测试环境
- 浏览器：Chrome/Safari/Firefox
- 项目：ChatUI前端
- 语言：中文(zh)、英文(en)

## 测试前置条件
1. 项目已启动（运行 `./start.sh`）
2. 用户已注册并登录
3. 可以访问主页（RoleSelect页面）

---

## 测试用例1：主页语言切换

### 测试步骤
1. 访问主页（/role-select）
2. 查看当前语言显示（默认中文）
3. 点击右上角语言切换按钮（中文/EN）
4. 观察页面文本是否切换

### 预期结果
✅ 点击语言切换按钮后：
- 中文模式：显示"我是用户"、"我是商家"、"点餐系统"
- 英文模式：显示"I'm a User"、"I'm a Merchant"、"Ordering System"
- 语言设置保存到localStorage
- 页面文本立即切换

---

## 测试用例2：商家后台界面国际化

### 测试步骤
1. 在主页切换语言到英文
2. 点击"我是商家"进入商家后台
3. 查看商家后台主菜单文本
4. 切换回中文，刷新页面观察

### 预期结果
✅ 英文模式下商家后台显示：
- 页面标题：Merchant Backend
- 菜单项：
  - Order List（订单列表）
  - Dish List（菜品列表）
  - Inventory Management（库存管理）
  - Purchase Management（进货管理）
  - Seat Management（座位管理）
  - Game Rankings（游戏排行）
  - Play Game（玩游戏）
  - Category Management（类别管理）
  - Revenue Management（收入管理）
  - Permission Management（权限管理）

✅ 中文模式下显示对应的中文文本

---

## 测试用例3：订单列表页面国际化

### 测试步骤
1. 进入商家后台
2. 点击"订单列表"
3. 查看标签页和订单状态文本
4. 切换语言，观察文本变化

### 预期结果
✅ 英文模式下显示：
- 标签页：
  - All Orders（全部订单）
  - Pending（待接单）
  - Preparing（制作中）
  - Completed（已完成）
- 订单状态：
  - Pending（待制作）
  - Paid（已支付）
  - Preparing（制作中）
  - Completed（已完成）
  - Cancelled（已取消）
- 按钮：Accept（接单）、Complete（完成）
- 空状态：No orders（暂无订单）
- 时间显示：Just now、X minutes ago、X hours ago、X days ago

✅ Toast消息也使用英文：
- "Order status updated"（订单状态已更新）
- "Load failed, please retry"（加载失败，请重试）
- "Update failed, please retry"（更新失败，请重试）

---

## 测试用例4：用户聊天界面国际化

### 测试步骤
1. 在主页切换语言到英文
2. 点击"我是用户"进入聊天界面
3. 查看欢迎消息和快捷按钮文本
4. 测试各种交互消息

### 预期结果
✅ 英文模式下显示：

**欢迎消息：**
```
Hello! Welcome to the smart ordering system. Please tell me your ordering requirements, such as: number of people, budget, taste preferences, dietary restrictions, etc., and I will recommend suitable dishes for you.
```

**快捷按钮：**
- Recommend some appetizers（推荐几道前菜开开胃）
- Some signature main dishes（来几道招牌主菜）
- Set for 3: three meat & three veggies（3人套餐：三荤三素）
- Add a dish for kids（加个小朋友爱吃的菜）
- Want something spicy, add two more（想吃辣的，再加两个辣菜）
- A hot soup to warm up（来碗热汤暖暖胃）
- Two desserts, budget under 100（来两个甜品，预算100以下）
- Three staples, two beverages（三个主食，两个饮料）
- Recommend cost-effective dishes（推荐性价比高的菜品）

---

## 测试用例5：座位分配与排队消息国际化

### 测试步骤
1. 英文模式下进入用户聊天界面
2. 观察座位分配消息
3. 如果需要排队，观察排队消息
4. 观察大厅状态变更消息

### 预期结果
✅ 英文模式下Toast消息：
- 座位分配：`Seat assigned: #5`
- 需要排队：`All seats are full. Your queue position: 3`
- 排队更新：`Queue position updated: #2`
- 连接错误：`Connection error`
- 大厅关闭：`Hall closed. Thank you for visiting!`
- 大厅开放：`Hall opened. Welcome!`

---

## 测试用例6：订单创建与游戏推荐国际化

### 测试步骤
1. 在英文模式下选择菜品
2. 确认订单
3. 观察订单成功消息
4. 观察游戏推荐消息

### 预期结果
✅ 英文模式下消息：
- 选择菜品验证：`Please select dishes`
- 菜品已选择：`3 dishes selected, cart updated`
- 订单成功：
```
Order created successfully!
Order ID: ORDER1234567890
Total: ¥128.50
Thank you for your order!
```
- 游戏推荐：`Play a mini game while waiting for your dishes?`
- 服务错误：`Sorry, something went wrong. Please try again later.`

---

## 测试用例7：麦克风权限消息国际化

### 测试步骤
1. 在用户聊天界面启用语音模式
2. 如果麦克风权限被拒绝，观察提示消息
3. 切换语言测试

### 预期结果
✅ 英文模式下Dialog消息：
- 内容：`Microphone permission denied. Please allow microphone access in browser settings`
- 确认按钮：`Got it`

✅ Toast提示：
- `Please allow microphone access`

---

## 测试用例8：语言设置持久化

### 测试步骤
1. 在主页切换语言到英文
2. 进入商家后台/用户界面
3. 刷新浏览器页面
4. 检查localStorage中的语言设置
5. 观察页面是否保持英文显示

### 预期结果
✅ 语言设置应该：
- 保存到localStorage（key: 'language'）
- 刷新页面后保持选择的语言
- 在所有页面生效（主页、商家后台、用户聊天）

---

## 测试用例9：切换语言的即时响应

### 测试步骤
1. 在商家后台主页面
2. 通过浏览器返回到主页
3. 切换语言
4. 再次进入商家后台
5. 观察文本是否立即更新

### 预期结果
✅ 切换语言后：
- 无需刷新页面
- 所有使用t()函数的文本立即更新
- Toast和Dialog消息使用新语言
- 快捷按钮文本更新

---

## 非功能测试

### 性能测试
✅ 语言切换应该：
- 立即响应（<100ms）
- 不触发页面重新加载
- 不影响用户当前操作状态

### 兼容性测试
✅ 测试浏览器：
- Chrome 最新版
- Safari 最新版
- Firefox 最新版
- 移动端浏览器

### 边界测试
✅ 测试场景：
- 没有设置语言时（默认中文）
- localStorage被清空
- 切换语言时正在加载数据
- 切换语言时有Toast显示

---

## 已知问题

### 待优化项
1. ⚠️ 部分商家后台子页面可能还未完全国际化（如库存管理、进货管理等详细页面）
2. ⚠️ 某些动态生成的错误消息可能来自后端，需要后端支持国际化

---

## 测试通过标准

### 必须满足的条件
✅ 主页语言切换按钮正常工作
✅ 商家后台主页所有菜单项已国际化
✅ 订单列表页面所有文本已国际化
✅ 用户聊天界面欢迎消息和快捷按钮已国际化
✅ 所有Toast和Dialog消息已国际化
✅ 座位分配和排队消息已国际化
✅ 订单创建相关消息已国际化
✅ 语言设置能够持久化
✅ 切换语言时无JavaScript错误
✅ 页面功能不受语言切换影响

---

## 测试报告模板

### 执行日期：YYYY-MM-DD
### 测试人员：
### 测试结果：

| 测试用例 | 状态 | 备注 |
|---------|------|------|
| 1. 主页语言切换 | ✅/❌ | |
| 2. 商家后台界面国际化 | ✅/❌ | |
| 3. 订单列表页面国际化 | ✅/❌ | |
| 4. 用户聊天界面国际化 | ✅/❌ | |
| 5. 座位分配与排队消息国际化 | ✅/❌ | |
| 6. 订单创建与游戏推荐国际化 | ✅/❌ | |
| 7. 麦克风权限消息国际化 | ✅/❌ | |
| 8. 语言设置持久化 | ✅/❌ | |
| 9. 切换语言的即时响应 | ✅/❌ | |

### 问题列表：
1. 
2. 
3. 

### 总结：
