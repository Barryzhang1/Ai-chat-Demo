# 聊天界面游戏标签功能 - 测试用例

## 测试概述
- **功能模块**：ChatUI - 用户聊天界面
- **测试功能**：输入框上方的FlappyBird游戏标签
- **测试目标**：验证游戏标签的显示、交互和游戏iframe的正常工作

---

## 测试用例

### TC-001: 游戏标签显示测试
**前置条件**：
- 用户已登录系统
- 进入用户点餐聊天界面

**测试步骤**：
1. 打开用户点餐聊天界面 (UserOrder页面)
2. 查看输入框区域

**预期结果**：
- ✅ 在输入框上方显示 "🎮 FlappyBird" 标签
- ✅ 标签样式为蓝色主题色 (primary color)
- ✅ 标签位置在输入框容器的顶部
- ✅ 标签显示清晰，不遮挡其他元素

**优先级**：高

---

### TC-002: 游戏标签点击测试
**前置条件**：
- 用户已登录系统
- 进入用户点餐聊天界面
- 游戏标签已正常显示

**测试步骤**：
1. 点击 "🎮 FlappyBird" 标签

**预期结果**：
- ✅ 弹出游戏弹窗
- ✅ 弹窗从底部滑入，高度为80%视窗高度
- ✅ 弹窗顶部显示标题 "🎮 FlappyBird"
- ✅ 弹窗右上角显示"关闭"按钮
- ✅ 点击有视觉反馈（轻微缩放和透明度变化）

**优先级**：高

---

### TC-003: 游戏iframe加载测试
**前置条件**：
- 游戏弹窗已打开
- FlappyBird游戏服务正在运行 (localhost:8082)

**测试步骤**：
1. 观察弹窗内的iframe内容
2. 等待游戏加载完成

**预期结果**：
- ✅ iframe正确加载FlappyBird游戏
- ✅ 游戏界面完整显示
- ✅ 游戏可以正常交互（点击/按键控制）
- ✅ 游戏音效正常播放
- ✅ iframe占满弹窗内容区域

**优先级**：高

---

### TC-004: 游戏弹窗关闭测试 - 按钮关闭
**前置条件**：
- 游戏弹窗已打开

**测试步骤**：
1. 点击弹窗右上角的"关闭"按钮

**预期结果**：
- ✅ 弹窗平滑关闭
- ✅ 返回到聊天界面
- ✅ 游戏标签仍然显示
- ✅ 聊天功能正常可用

**优先级**：中

---

### TC-005: 游戏弹窗关闭测试 - 遮罩关闭
**前置条件**：
- 游戏弹窗已打开

**测试步骤**：
1. 点击弹窗外的遮罩区域（暗色背景）

**预期结果**：
- ✅ 弹窗平滑关闭
- ✅ 返回到聊天界面
- ✅ 游戏标签仍然显示

**优先级**：中

---

### TC-006: 多次打开关闭测试
**前置条件**：
- 用户在聊天界面

**测试步骤**：
1. 点击游戏标签打开弹窗
2. 关闭弹窗
3. 重复步骤1-2，共5次

**预期结果**：
- ✅ 每次都能正常打开弹窗
- ✅ 每次都能正常关闭弹窗
- ✅ 不出现内存泄漏或性能问题
- ✅ 游戏每次都能正常加载

**优先级**：中

---

### TC-007: 游戏标签与语音模式兼容性测试
**前置条件**：
- 用户在聊天界面

**测试步骤**：
1. 点击语音按钮进入语音模式
2. 观察游戏标签状态
3. 点击游戏标签
4. 关闭游戏弹窗
5. 退出语音模式

**预期结果**：
- ✅ 语音模式下游戏标签仍然显示
- ✅ 语音模式下可以正常打开游戏
- ✅ 游戏打开后语音功能不受影响
- ✅ 功能切换流畅，无冲突

**优先级**：中

---

### TC-008: 移动端响应式测试
**前置条件**：
- 使用移动设备或浏览器移动端模式

**测试步骤**：
1. 在不同尺寸的移动设备上打开聊天界面
2. 测试游戏标签和弹窗显示
3. 测试触摸交互

**预期结果**：
- ✅ 游戏标签在小屏幕上正常显示
- ✅ 弹窗高度适配不同屏幕
- ✅ 触摸点击响应灵敏
- ✅ 游戏在移动端可以正常控制

**优先级**：高

---

### TC-009: 游戏服务离线测试
**前置条件**：
- FlappyBird游戏服务未运行

**测试步骤**：
1. 停止FlappyBird游戏服务
2. 点击游戏标签打开弹窗
3. 观察iframe加载情况

**预期结果**：
- ✅ 弹窗正常打开
- ✅ iframe显示连接失败或加载错误页面
- ✅ 不影响聊天界面的其他功能
- ✅ 用户可以正常关闭弹窗

**优先级**：低

---

### TC-010: 样式与布局测试
**前置条件**：
- 用户在聊天界面

**测试步骤**：
1. 检查输入框区域的整体布局
2. 检查游戏标签的间距和对齐
3. 检查弹窗的圆角和阴影
4. 检查不同状态下的视觉效果

**预期结果**：
- ✅ 输入框布局合理，间距协调
- ✅ 游戏标签不与其他元素重叠
- ✅ 弹窗顶部有圆角 (16px)
- ✅ 按钮hover和active状态有视觉反馈
- ✅ 整体风格与应用保持一致

**优先级**：中

---

## 测试环境要求
- **浏览器**：Chrome 90+, Safari 14+, Firefox 88+
- **移动端**：iOS 13+, Android 8+
- **服务**：FlappyBird游戏服务运行在 http://localhost:8082
- **依赖**：antd-mobile组件库正常工作

## 测试数据
- **游戏URL**：http://localhost:8082
- **标签文本**：🎮 FlappyBird
- **弹窗高度**：80vh

## 已知限制
- 游戏iframe需要FlappyBird服务正常运行
- 游戏内交互依赖FlappyBird自身实现
- 跨域策略可能影响某些浏览器的iframe加载

---

**测试用例版本**：v1.0  
**创建日期**：2026-02-02  
**最后更新**：2026-02-02
